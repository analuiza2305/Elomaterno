<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EloMaterno - Home Psicólogo</title>
  <link rel="stylesheet" href="./css/homePsi.css">
  <link rel="stylesheet" href="./css/globals.css">
  <link rel="stylesheet" href="./css/calendario.css">
  <link rel="stylesheet" href="./css/chat.css">
  <link rel="stylesheet" href="./css/header.css">

  <link rel="stylesheet" href="./css/forum.css">
  <link rel="stylesheet" href="./css/artigos.css">
  <link rel="icon" type="image/svg+xml" href="img/iconelogo.svg">
  <link rel="alternate icon" type="image/png" href="img/iconelogo.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
  <header class="header">
    <h1>Bem-vindo(a), Dr.</h1>
    <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menu">☰</button>
<div id="sidebar-overlay" class="hidden" aria-hidden="true"></div>

    <div class="right-section">

      <div class="accessibility-selector">
        <button id="accessibility-toggle" aria-label="Opções de acessibilidade">
          <i class="fa fa-universal-access" aria-hidden="true"></i>
        </button>
        <ul id="accessibility-menu" class="hidden">
          <li id="increase-font">
            <i class="fa fa-plus-circle" aria-hidden="true"></i> Aumentar Fonte
          </li>
          <li id="decrease-font">
            <i class="fa fa-minus-circle" aria-hidden="true"></i> Diminuir Fonte
          </li>
          <li id="colorblind-filter">
            <i class="fa fa-low-vision" aria-hidden="true"></i> Filtros Daltonismo
          </li>
          <li id="screen-reader">
            <i class="fa fa-assistive-listening-systems" aria-hidden="true"></i> Leitura em Voz
          </li>
          <li id="reading-mask">
            <i class="fa fa-highlighter" aria-hidden="true"></i> Máscara de leitura
          </li>
          <li id="bold-text">
            <i class="fa fa-bold" aria-hidden="true"></i> Letras destacadas
          </li>
          <li id="high-contrast">
            <i class="fa fa-adjust" aria-hidden="true"></i> Alto contraste
          </li>
          <li id="increase-line">
            <i class="fa fa-arrows-alt-v" aria-hidden="true"></i> Aumentar Espaçamento Linhas
          </li>
          <li id="decrease-line">
            <i class="fa fa-compress-arrows-alt" aria-hidden="true"></i> Diminuir Espaçamento Linhas
          </li>
          <li id="reset-accessibility">
            <i class="fa fa-undo" aria-hidden="true"></i> Redefinir
          </li>
        </ul>
      </div>

      <div id="reading-mask-overlay">
        <div class="highlight-window"></div>
      </div>

      <div class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon" id="theme-toggle" aria-label="Alternar tema claro e escuro"></i>
      </div>

      <button id="infoBtn" class="info-btn">
        <i class="fa-solid fa-circle-info"></i>
      </button>

      <button id="logoutBtn" class="logout-btn">
        <i class="fa-solid fa-right-from-bracket"></i>
      </button>

      <button id="avatarBtn" class="avatar-btn">
        <img id="currentAvatar" src="./img/account_icon.png" alt="Avatar">
      </button>

    </div>
  </header>

  <main class="main-container">
    <aside class="sidebar">
      <button class="menu-btn active" data-target="dashboard">
        <i class="fa-solid fa-chart-line"></i>
        <span>Painel de controle</span>
      </button>

      <button class="menu-btn" data-target="agenda">
        <i class="fa-solid fa-calendar-days"></i>
        <span>Agenda</span>
      </button>

      <button class="menu-btn" data-target="artigos">
        <i class="fa-solid fa-newspaper"></i>
        <span>Artigos</span>
      </button>

      <button class="menu-btn" data-target="consultas">
        <i class="fa-solid fa-hands-helping"></i>
        <span>Consultas</span>
      </button>

      <button class="menu-btn" data-target="forum">
        <i class="fa-solid fa-comments"></i>
        <span>Fórum</span>
      </button>

      <button class="menu-btn" data-target="pacientes">
        <i class="fa-solid fa-user-group"></i>
        <span>Pacientes</span>
      </button>

      <button class="menu-btn" data-target="chats">
        <i class="fa-solid fa-message"></i>
        <span>Chats</span>
      </button>

      <div class="last-activities">
        <h3>Últimas Atividades</h3>
        <ul>

        </ul>
      </div>
    </aside>

    <section class="content" id="dashboard">
      <h2>Consultas Agendadas</h2>
      <div id="todayAppointments"></div>

      <div class="stats">
        <div class="stat-card">
          <span>
            <div class="loader">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
          </span>
          <p>Consultas agendadas hoje</p>
        </div>
        <div class="stat-card">
          <span>
            <div class="loader">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
          </span>
          <p>Sessões agendadas no total</p>
        </div>
      </div>
    </section>

    <section class="content hidden" id="agenda">
      <div class="container">
        <div class="calendar-container">
          <div class="calendar-header">
            <button onclick="prevMonth()">&lt;</button>
            <div class="month-year-select">
              <select id="month-select" onchange="onMonthChange()"></select>
              <select id="year-select" onchange="onYearChange()"></select>
            </div>
            <button onclick="nextMonth()">&gt;</button>
          </div>

          <div class="calendar-days">
            <div>D</div>
            <div>S</div>
            <div>T</div>
            <div>Q</div>
            <div>Q</div>
            <div>S</div>
            <div>S</div>
          </div>
          <div class="calendar-dates" id="calendarDates"></div>
        </div>

        <div class="events-container">
          <h3>Consultas do mês</h3>
          <div class="event-list"></div>
          <button class="add-consult-btn">Adicionar consulta</button>
        </div>
      </div>
    </section>

    <section class="content hidden" id="artigos">
      <p>Carregando artigos...</p>
    </section>

    <section class="content hidden" id="forum">
      <div class="forum-container">
        <div class="forum-search">
          <input type="text" id="forum-search-input" placeholder="Pesquisar no fórum">
          <button class="add-for-btn" id="nova-post-btn">+</button>
        </div>

        <div id="posts-list">
          <div class="loader">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
        </div>
      </div>

      <div class="modal hidden" id="modal-post">
        <div class="modal-content">
          <span class="close" id="close-post-modal">&times;</span>
          <h2>Nova Publicação</h2>

          <form id="form-post">
            <label for="titulo">Título</label>
            <input type="text" id="titulo" placeholder="Digite o título" required>

            <label for="conteudo">Conteúdo</label>
            <textarea id="conteudo" rows="4" placeholder="Escreva sua mensagem..." required></textarea>

            <label for="anonimo-checkbox" class="anonimo-check">
              <input type="checkbox" id="anonimo-checkbox">
              <span>Postar como anônimo</span>
            </label>

            <div class="modal-actions">
              <button type="button" id="cancelar-post">Cancelar</button>
              <button type="submit">Publicar</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <section class="content hidden" id="pacientes">
      <h2>Histórico de Pacientes</h2>
      <div class="patients-grid">
        <div class="patient-card" data-id="1">
          <div class="patient-header">
            <span>Maria da Silva | 09:00</span>
            <button class="note-btn"><img src="./img/edit_icon.png" alt="Editar"></button>
          </div>
          <div class="patient-body">
            <p class="patient-notes">Nenhuma anotação adicionada.</p>
            <button class="contact-btn">Entrar em contato</button>
          </div>
        </div>
      </div>
    </section>

    <section id="chats" class="content hidden">
      <main class="chat-wrapper">
        <aside class="chat-sidebar">
          <div class="sidebar-header">Usuários</div>
          <ul id="chatUsersList" class="user-list"></ul>
        </aside>

        <section class="chat-main">
          <header class="chat-header" id="chatHeaderPsi">
            <button class="back-btn hidden" id="backBtnPsi"><i class="fa fa-arrow-left"></i></button>
            <img id="chatAvatarPsi" class="chat-avatar hidden" src="" alt="Avatar do usuário">
            <span id="chatTitlePsi">Selecione um usuário</span>
          </header>

          <div id="messagesPsi" class="chat-messages"></div>

          <form id="messageFormPsi" class="chat-input hidden">
            <button type="button" id="voiceBtnPsi" class="voice-btn">
              <i class="fa fa-microphone"></i>
            </button>
            <input type="text" id="messageInputPsi" placeholder="Digite sua mensagem..." required>
            <button type="submit"><i class="fa fa-paper-plane"></i></button>
          </form>
        </section>
      </main>
    </section>

    <section class="content hidden" id="consultas">
      <div class="consultas-container">
        <div class="section-header">
          <div class="consultas-tabs">
            <button class="tab-btn active" data-status="pendente">Pendentes</button>
            <button class="tab-btn" data-status="aceito">Agendadas</button>
            <button class="tab-btn" data-status="realizado">Realizadas</button>
            <button class="tab-btn" data-status="negado">Negadas</button>
          </div>

          <h2 id="titulo-consultas"></h2>
        </div>

        <div class="consultas-list" id="consultas-list"></div>
      </div>

    </section>

    <section class="content hidden" id="post-comments">
      <div class="coment-container">
        <button id="back-to-forum" class="back-btn-forum">Voltar ao Fórum</button>
        <div class="post-card com-brilho" id="post-container"></div>

        <div class="comment-input">
          <input type="text" id="comment-field" placeholder="Escreva seu comentário..." class="comment-field">
          <button class="send-btn" id="send-comment-btn">
            <img src="./img/send_icon.png" alt="Enviar">
          </button>
        </div>

        <div class="respostas"></div>
      </div>
    </section>

    <div class="popup hidden" id="notesPopup">
      <div class="popup-content">
        <h3>Anotações do Paciente</h3>
        <textarea id="notesArea" placeholder="Escreva suas anotações aqui..."></textarea>
        <div class="popup-actions">
          <button id="saveNote" class="contact-btn">Salvar</button>
          <button id="closePopup" class="add-consult-btn" type="button">Fechar</button>
        </div>
      </div>
    </div>

    <section class="content hidden" id="informacoes">
      <h2>Editar minhas Informações</h2>
      <form id="psiForm" class="info-form">
        <div class="input-edit">
          <label>Nome:</label>
          <div class="field-group">
            <input type="text" id="psiNome" placeholder="Nome completo" disabled>
            <button type="button" class="edit-btn" data-field="nome"><i class="fa-solid fa-pen"></i></button>
          </div>
        </div>

        <div class="input-edit">
          <label>Email:</label>
          <div class="field-group">
            <input type="email" id="psiEmail" placeholder="Email" disabled>
            <button type="button" class="edit-btn" data-field="email"><i class="fa-solid fa-pen"></i></button>
          </div>
        </div>

        <div class="input-edit">
          <label>CRP:</label>
          <div class="field-group">
            <input type="text" id="psiCRP" placeholder="CRP" disabled>
            <button type="button" class="edit-btn" data-field="crp"><i class="fa-solid fa-pen"></i></button>
          </div>
        </div>

        <div class="input-edit">
          <label>Área:</label>
          <div class="field-group">
            <input type="text" id="psiArea" placeholder="Área de atuação" disabled>
            <button type="button" class="edit-btn" data-field="area"><i class="fa-solid fa-pen"></i></button>
          </div>
        </div>

        <div class="input-edit">
          <label>Especializações (separadas por vírgula):</label>
          <div class="field-group">
            <input type="text" id="psiEspecializacoes" placeholder="Ansiedade, Conflitos Amorosos..." disabled>
            <button type="button" class="edit-btn" data-field="especializacoes"><i class="fa-solid fa-pen"></i></button>
          </div>
        </div>
      </form>
    </section>

  </main>

  
  <div id="firstAvatarModal" class="modal hidden">
    <div class="modal-content">
      <h3>Escolha seu Avatar</h3>
      <p>Você deve escolher um avatar para continuar usando a plataforma.</p>
      <div class="avatars-grid">
        <img src="./img/psicologosavatar/1.png" data-avatar="1" class="avatar-option">
        <img src="./img/psicologosavatar/2.png" data-avatar="2" class="avatar-option">
        <img src="./img/psicologosavatar/3.png" data-avatar="3" class="avatar-option">
        <img src="./img/psicologosavatar/4.png" data-avatar="4" class="avatar-option">
        <img src="./img/psicologosavatar/5.png" data-avatar="5" class="avatar-option">
        <img src="./img/psicologosavatar/6.png" data-avatar="6" class="avatar-option">
        <img src="./img/psicologosavatar/7.png" data-avatar="7" class="avatar-option">
        <img src="./img/psicologosavatar/8.png" data-avatar="8" class="avatar-option">
        <img src="./img/psicologosavatar/9.png" data-avatar="9" class="avatar-option">
        <img src="./img/psicologosavatar/10.png" data-avatar="10" class="avatar-option">
        <img src="./img/psicologosavatar/11.png" data-avatar="11" class="avatar-option">
        <img src="./img/psicologosavatar/12.png" data-avatar="12" class="avatar-option">
        <img src="./img/psicologosavatar/13.png" data-avatar="13" class="avatar-option">
        <img src="./img/psicologosavatar/14.png" data-avatar="14" class="avatar-option">
        <img src="./img/psicologosavatar/15.png" data-avatar="15" class="avatar-option">
        <img src="./img/psicologosavatar/16.png" data-avatar="16" class="avatar-option">
        <img src="./img/psicologosavatar/17.png" data-avatar="17" class="avatar-option">
        <img src="./img/psicologosavatar/18.png" data-avatar="18" class="avatar-option">
        <img src="./img/psicologosavatar/19.png" data-avatar="19" class="avatar-option">
      </div>
      <button id="confirmFirstAvatar" class="contact-btn" disabled>Confirmar</button>
    </div>
  </div>

  
  <div id="changeAvatarModal" class="modal hidden">
    <div class="modal-content">
      <h3>Mudar Avatar</h3>
      <div class="avatars-grid">
        <img src="./img/psicologosavatar/1.png" data-avatar="1" class="avatar-option">
        <img src="./img/psicologosavatar/2.png" data-avatar="2" class="avatar-option">
        <img src="./img/psicologosavatar/3.png" data-avatar="3" class="avatar-option">
        <img src="./img/psicologosavatar/4.png" data-avatar="4" class="avatar-option">
        <img src="./img/psicologosavatar/5.png" data-avatar="5" class="avatar-option">
        <img src="./img/psicologosavatar/6.png" data-avatar="6" class="avatar-option">
        <img src="./img/psicologosavatar/7.png" data-avatar="7" class="avatar-option">
        <img src="./img/psicologosavatar/8.png" data-avatar="8" class="avatar-option">
        <img src="./img/psicologosavatar/9.png" data-avatar="9" class="avatar-option">
        <img src="./img/psicologosavatar/10.png" data-avatar="10" class="avatar-option">
        <img src="./img/psicologosavatar/11.png" data-avatar="11" class="avatar-option">
        <img src="./img/psicologosavatar/12.png" data-avatar="12" class="avatar-option">
        <img src="./img/psicologosavatar/13.png" data-avatar="13" class="avatar-option">
        <img src="./img/psicologosavatar/14.png" data-avatar="14" class="avatar-option">
        <img src="./img/psicologosavatar/15.png" data-avatar="15" class="avatar-option">
        <img src="./img/psicologosavatar/16.png" data-avatar="16" class="avatar-option">
        <img src="./img/psicologosavatar/17.png" data-avatar="17" class="avatar-option">
        <img src="./img/psicologosavatar/18.png" data-avatar="18" class="avatar-option">
        <img src="./img/psicologosavatar/19.png" data-avatar="19" class="avatar-option">
      </div>
      <div class="modal-actions">
        <button id="confirmChangeAvatar" class="contact-btn" disabled>Confirmar</button>
        <button id="cancelChangeAvatar" class="add-consult-btn">Cancelar</button>
      </div>
    </div>
  </div>

  <script type="module" src="./js/homePsi.js"></script>
  <script type="module" src="./js/globals.js"></script>

<script>
// ===== Toggle do sidebar + overlay (mobile/tablet) =====
(function () {
  const menuBtn = document.getElementById("menu-toggle");
  const sidebar = document.querySelector(".sidebar");
  const overlay = document.getElementById("sidebar-overlay");

  if (!menuBtn || !sidebar || !overlay) {
    // se algum não existir, tentamos criar elementos dinamicamente (fallback)
    return;
  }

  function openSidebar() {
    sidebar.classList.add("active");
    overlay.classList.add("active");
    overlay.classList.remove("hidden");
    // evitar rolagem do body quando aberto
    document.documentElement.style.overflow = "hidden";
  }

  function closeSidebar() {
    sidebar.classList.remove("active");
    overlay.classList.remove("active");
    overlay.classList.add("hidden");
    document.documentElement.style.overflow = "";
  }

  menuBtn.addEventListener("click", () => {
    if (sidebar.classList.contains("active")) closeSidebar();
    else openSidebar();
  });

  // fechar com overlay click
  overlay.addEventListener("click", closeSidebar);

  // fechar com ESC
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" || e.key === "Esc") closeSidebar();
  });

  // fechar automaticamente ao clicar em um menu (útil quando usuário escolhe uma aba)
  document.querySelectorAll(".sidebar .menu-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      // apenas fecha em telas pequenas
      if (window.innerWidth <= 1024) closeSidebar();
    });
  });

})();
</script>
</body>
</html>
